# Fastlane ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Fastlaneã‚’ä½¿ç”¨ã—ã¦iOSã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã—ã¦ã„ã¾ã™ã€‚

## ğŸ“‹ å‰ææ¡ä»¶

- Xcodeï¼ˆæœ€æ–°ç‰ˆæ¨å¥¨ï¼‰
- Fastlaneï¼ˆ`brew install fastlane`ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼‰
- Apple Developer Program ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—
- App Store Connect ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©

## ğŸš€ ä½¿ã„æ–¹

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **Apple IDã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®š**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
export FASTLANE_USER="your-apple-id@example.com"
export FASTLANE_PASSWORD="your-app-specific-password"
```

ã¾ãŸã¯ã€å„ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«å…¥åŠ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

2. **App Store Connect API Key ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ**ï¼ˆæ¨å¥¨ï¼‰

App Store Connect API Keyã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€2ãƒ•ã‚¡ã‚¯ã‚¿èªè¨¼ã‚’å›é¿ã§ãã¾ã™ã€‚

- App Store Connect > ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚¢ã‚¯ã‚»ã‚¹ > ã‚­ãƒ¼ > App Store Connect API ã§ä½œæˆ
- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ `.p8` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `fastlane/` ã«é…ç½®
- Fastfileã«è¨­å®šã‚’è¿½åŠ ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰

#### 1. TestFlightã«ãƒ“ãƒ«ãƒ‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```bash
fastlane beta
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
- ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’è‡ªå‹•ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
- ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ï¼ˆArchiveä½œæˆï¼‰
- TestFlightã«è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**æ‰€è¦æ™‚é–“**: ç´„5-10åˆ†

#### 2. App Storeã«å¯©æŸ»æå‡º

```bash
fastlane release
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‹ï¼ˆEnterã§ã‚¹ã‚­ãƒƒãƒ—ï¼‰
- ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’è‡ªå‹•ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
- ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ï¼ˆArchiveä½œæˆï¼‰
- App Store Connectã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- è‡ªå‹•çš„ã«å¯©æŸ»ã«æå‡º

**æ‰€è¦æ™‚é–“**: ç´„10-15åˆ†

#### 3. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ

```bash
fastlane bump_version
```

ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: 1.0.1 â†’ 1.0.2ï¼‰ã¨ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’è‡ªå‹•ã§æ›´æ–°ã—ã¾ã™ã€‚

#### 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³

```bash
fastlane clean
```

ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

```bash
# App Store Connectã®èªè¨¼æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ
fastlane fastlane-credentials remove

# å†åº¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
fastlane beta
```

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³
fastlane clean

# Xcodeã§ã‚‚æ‰‹å‹•ã‚¯ãƒªãƒ¼ãƒ³
# Xcode > Product > Clean Build Folder

# å†åº¦å®Ÿè¡Œ
fastlane beta
```

### ç½²åã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

- Xcodeã§ç½²åè¨­å®šã‚’ç¢ºèª
- Automatic SigningãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
- Provisioning ProfileãŒæœ€æ–°ã‹ç¢ºèª

## ğŸ“ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`fastlane/Fastfile` ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€å‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼š

- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®è‡ªå‹•å…¥åŠ›
- Slackã¸ã®é€šçŸ¥è¿½åŠ 
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆè‡ªå‹•ç”Ÿæˆ
- ãƒ†ã‚¹ãƒˆã®è‡ªå‹•å®Ÿè¡Œ

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ **çµ¶å¯¾ã«Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„**ï¼š

- `AuthKey_*.p8`ï¼ˆApp Store Connect API Keyï¼‰
- `*.mobileprovision`
- `*.ipa`

ã“ã‚Œã‚‰ã¯ `.gitignore` ã«æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Fastlane å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.fastlane.tools/)
- [iOSã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ—ãƒ­ã‚¤](https://docs.fastlane.tools/getting-started/ios/beta-deployment/)
- [App Store Connect API](https://developer.apple.com/documentation/appstoreconnectapi)
